Основные возможности:
- Шифрованная запись видео с использованием ключей X25519
- Фоновая запись без UI
- Поддержка различных режимов: день, ночь, фронтальная камера
- Разрешения: HD (1280x720), FHD (1920x1080), 2K (2560x1440), 4K (3840x2160)
- Кодеки: AVC (H.264), HEVC (H.265)
- Управление ключами: импорт, экспорт, сканирование QR кодов
- Выбор выходной директории для сохранения файлов
- Настройки камеры и записи
- Управление через ADB команды
- Плитка быстрого доступа в настройках
- Виброотклики и уведомления

Команды ADB и их настройка:

Запуск записи:
adb shell am start -a com.android.system.action.START_SERVICE -n com.tnibler.cryptocam/.StartReceiverActivity --es mode day --es res FHD --es codec AVC -f 0x10008000

Параметры:
- mode: day, night, front
- res: HD, FHD, 2K, 4K
- codec: AVC, HEVC
- -f 0x10008000: флаг для запуска в фоне (лучше его использовать всегда)

Остановка записи:
adb shell am start -a com.android.system.action.STOP_SERVICE -n com.tnibler.cryptocam/.StartReceiverActivity -f 0x10008000

Открыть настройки:
adb shell am start -a com.android.system.action.OPEN_SETTINGS -n com.tnibler.cryptocam/.MainActivity -f 0x10008000

Открыть управление ключами:
adb shell am start -a com.android.system.action.OPEN_KEYS -n com.tnibler.cryptocam/.MainActivity -f 0x10008000

Открыть выбор выходной папки:
adb shell am start -a com.android.system.action.PICK_OUTPUT -n com.tnibler.cryptocam/.MainActivity -f 0x10008000

Проверка ключа шифрования:
adb shell am start -a com.android.system.action.CHECK_KEY -n com.tnibler.cryptocam/.MainActivity -f 0x10008000

Обработка разрешений:

При первом запуске записи приложение запрашивает разрешения на камеру, микрофон и уведомления.
Если разрешения отклонены, появляется диалог PermissionRationaleActivity с объяснением необходимости разрешений и кнопкой "Перейти в настройки" для ручного включения в системных настройках Android.
Без разрешений запись невозможна.

Настройки приложения:

Страница настроек доступна через меню или ADB команду.
Основные разделы:

1. Выходная директория: Выбор папки для сохранения файлов. Обязательно для работы.
2. Шаблон имени файла: Настройка формата имен файлов (лучше не менять во избежания поломки функциональности разных имён файлов при записи и записанных)
3. Камера для дня: Выбор ID камеры для дневного режима
4. Камера для ночи: Выбор ID камеры для ночного режима
5. Камера для фронта: Выбор ID камеры для фронтальной камеры
6. Вибрация при старте: Включить вибрацию при начале записи
7. Вибрация при остановке: Включить двойную вибрацию при окончании записи
8. Вибрация во время записи: Периодическая вибрация каждые 5 секунд

Инструкция по использованию:

1. Установка и первое использование:
   - Установите APK приложения
   - При первом запуске выберите ключ шифрования (запустив команду запуска записи или открыв настройки)
   - Выберите выходную директорию для сохранения файлов (запустив команду запуска записи или открыв настройки)
   - Предоставьте разрешения на камеру, микрофон и уведомления (запустив команду запуска записи или открыв камеру для сканирования qr)

2. Управление ключами:
   - В разделе "Ключи" можно добавить новые ключи через импорт или сканирование QR
   - Выберите активные ключи для шифрования
   - Можно редактировать имена ключей, удалять неиспользуемые

3. Запись видео:
   - Запустите команду START_SERVICE
   - Запись идет в фоне, показывается уведомление с таймером
   - Команда STOP_SERVICE останавливает запись
   - Файлы сохраняются в выбранную директорию с шифрованием

4. Использование ADB:
   - Подключите устройство к ПК с ADB
   - Используйте команды выше для автоматизации записи
   - Можно интегрировать в скрипты для автоматической записи

5. Расшифровка файлов:
   - Файлы имеют расширение .age
   - Для расшифровки используйте age инструмент с соответствующим ключом (программа для этого есть в репозитории https://gitlab.com/cryptocam/cryptocam )
   - age --decrypt -i private_key.txt encrypted_file.age (это команда, но проще использовать UI программы)

6. Обработка нехватки памяти:
    - Корректная остановка записи при нехватке места с сохранением файла

Дополнительные возможности:
- Автоматическое переключение камер
- Настройка битрейта (в коде) и FPS

Нюансы:
- В некоторых случаях (при дублировании файла или после переустановки приложения) получается так что у файла имя, например, "cryptocam_0001 (1).age". Этот пробел не даст запихнуть файл в программу расшифрования. Решением является удаление этого пробела.
